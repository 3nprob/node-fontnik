language: cpp
compiler:
- gcc
env:
  matrix:
  - NODE_NVM_VERSION="0.10"
  global:
  - BUILD: '/tmp/fontnik-build'
  - PKG_CONFIG_PATH: '/tmp/fontnik-build/lib/pkgconfig'
  - secure: "a0yUjLd9GcCEsD3jgOZRBD6iY3slQQKbAchd7umLZwOQPO3VmShxCNm7/4Sl4Emmo+gS54X1uJ66VjhXKE2LalYI0//gsuyqoTSsFrE17kBARwY47LMuhX+TOCWNgPjzZhUjPkmiiLnwDuQ0rUXGT/2loRrIumPho/PpK+FlUrk="
  - secure: "WIvRH9Tj4Je1k/c7dSM18DcEmTmxL23v3uX2H2TnghSXqdKcwvQZ4nw/Z+xwfkoUHving06sId8oTmjXIuG2vFtBK7OiXcCjls8EB6SgDt/4OkmFkTdkYFBE0SABsDeEnYI4K3z+7rnUjc0QhjvaFtBh70Yf2zMHzlh/+6VJQDo="
before_install:
- export platform=$(uname -s | sed "y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/")
- export PATH="$BUILD/bin:$PATH"
- if [[ "$platform" == "linux" ]]; then export CXX=g++-4.8; export CC=gcc-4.8; fi
- git clone https://github.com/creationix/nvm.git ../.nvm
- source ../.nvm/nvm.sh
- nvm install $NODE_NVM_VERSION
- nvm use $NODE_NVM_VERSION
- node --version
- npm --version
- ./deps/travis-build.sh
install:
- npm install --build-from-source
script:
- npm test
after_success:
- ./deps/travis-publish.sh

